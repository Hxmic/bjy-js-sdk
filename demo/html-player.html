<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML 播放器</title>

    <style>
        video {
            width: 400px;
            height: 300px;
        }
    </style>
</head>
<body>

    <h1>
        PC 请用 Safari 打开
        手机请随意
    </h1>

    <div class="player">
        <!-- 因为手机不支持自动播放，需在播放器位置放一个播放按钮，点击后调用 teacherPlayer.playAV(true) 触发播放 -->
    </div>

    <script src="http://cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.217/classroom/classroom.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.217/player/player.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.217/player/core/Player.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.217/player/extension/html.js"></script>
    <script>

        BJY.init({
            env: 'production',
            // class id 需配置成开课的 id
            class: {
                id: '17050841292248',
                name: '课程名称',
                // 开始时间
                startTime: 1489104000000,
                // 结束时间
                endTime: 1489190400000
            },
            // 当前用户配置
            user: {
                // 为了避免互踢，number 配置为 0
                number: '0',
                avatar: 'http://img.gsxservice.com/30517_djgkb6i6.jpeg',
                name: '昵称',
                type: 0
            }
        });

        var store = BJY.store;
        var eventEmitter = BJY.eventEmitter;

        var Player = BJY.Player;

        var teacherPlayer;

        eventEmitter
        .one(
            eventEmitter.VIEW_RENDER_TRIGGER,
            function (event, data) {

                // 此时教室只有你自己，需要请求才能知道别人的存在
                // 因此这里需要先请求当前发言用户
                // 老师也属于发言用户

                eventEmitter.trigger(
                    eventEmitter.USER_ACTIVE_REQ
                );

            }
        )
        // 老师播放器的生命周期管理
        .on(
            eventEmitter.TEACHER_MEDIA_ON,
            function () {
                if (!teacherPlayer) {
                    teacherPlayer = new Player({
                        element: $('.player'),
                        user: store.get('teacher'),
                        extension: Player.html
                    });
                }
            }
        )
        .on(
            eventEmitter.TEACHER_REMOVE,
            function () {
                if (teacherPlayer) {
                    teacherPlayer.dispose();
                }
            }
        );

    </script>
</body>
</html>
