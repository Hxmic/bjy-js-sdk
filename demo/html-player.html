<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML 播放器</title>

    <style>
        video {
            width: 400px;
            height: 300px;
        }
    </style>
</head>
<body>

    <div class="player">

    </div>

    <script src="http://cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.58/classroom/classroom.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.58/player/player.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.58/player/core/Player.js"></script>
    <script src="http://live-cdn.baijiacloud.com/js-sdk/0.0.58/player/extension/html.js"></script>
    <script>

        BJY.init({
            env: 'test',
            class: {
                id: '877449628',
                name: '课程名称',
                startTime: 1489104000000,
                endTime: 1489190400000
            },
            user: {
                number: '123123123314',
                avatar: 'http://img.gsxservice.com/30517_djgkb6i6.jpeg',
                name: '用户昵称',
                type: 0
            },
            teacher: {
                number: '12312312312',
                avatar: 'http://img.gsxservice.com/30517_djgkb6i6.jpeg',
                name: '老师昵称',
                type: 1
            }
        });

        var store = BJY.store;
        var eventEmitter = BJY.eventEmitter;

        var Player = BJY.Player;

        // 老师专用播放器
        var teacherPlayer;

        eventEmitter
        .one(
            eventEmitter.VIEW_RENDER_TRIGGER,
            function (event, data) {

                // 此时教室只有你自己，需要请求才能知道别人的存在
                // 因此这里需要先请求当前发言用户
                // 老师也属于发言用户

                eventEmitter
                .trigger(
                    eventEmitter.USER_ACTIVE_REQ
                )
                // 老师播放器的生命周期管理
                .on(
                    eventEmitter.TEACHER_ADD,
                    function () {
                        teacherPlayer = new Player({
                            element: $('.player'),
                            user: store.get('teacher'),
                            extension: Player.html
                        });
                    }
                )
                .on(
                    eventEmitter.TEACHER_REMOVE,
                    function () {
                        teacherPlayer.dispose();
                    }
                );

            }
        );

    </script>
</body>
</html>
